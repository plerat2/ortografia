
<!-- saved from url=(0260)https://1379121260-atari-embeds.googleusercontent.com/embeds/16cb204cf3a9d4d223a0a3fd8b0eec5d/inner-frame-minified.html?jsh=m%3B%2F_%2Fscs%2Fabc-static%2F_%2Fjs%2Fk%3Dgapi.lb.ca.4fEANRLsRvk.O%2Fd%3D1%2Frs%3DAHpOoo-RVHSn6qq6rqaBbSZyXBD069WJlA%2Fm%3D__features__ -->
<html lang="ca" class="h-full"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!--<base target="_blank">--><base href="." target="_blank">

 
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Entrena les Grafies ‚Äì Alteracions ortogr√†fiques (v3)</title>
  <script src="./saved_resource"></script>
  <script src="./element_sdk.js.baixa"></script>
  <link href="./css2" rel="stylesheet">
  <style>
    body { box-sizing: border-box; }
    * { font-family: 'Poppins', sans-serif; }
    .grafia-button { transition: all 0.2s ease; position: relative; }
    .grafia-button:hover { transform: translateY(-2px); }
    .grafia-button:active { transform: scale(0.95); }
    .correct-animation { animation: correctPulse 0.5s ease; }
    .incorrect-animation { animation: shake 0.5s ease; }
    @keyframes correctPulse { 0%, 100% { transform: scale(1);} 50% { transform: scale(1.1);} }
    @keyframes shake { 0%, 100% { transform: translateX(0);} 25% { transform: translateX(-5px);} 75% { transform: translateX(5px);} }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px);} to { opacity: 1; transform: translateY(0);} }
    .confetti { position: fixed; pointer-events: none; z-index: 1000; }
    .mode-card { transition: all 0.3s ease; }
    .mode-card:hover { transform: translateY(-5px); }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="./data_sdk.js.baixa" type="text/javascript"></script>
 <style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.fixed{position:fixed}.inset-0{inset:0px}.left-1\/2{left:50%}.top-1\/2{top:50%}.z-50{z-index:50}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:0.5rem}.mb-3{margin-bottom:0.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mt-1{margin-top:0.25rem}.mt-2{margin-top:0.5rem}.mt-4{margin-top:1rem}.inline-block{display:inline-block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-2{height:0.5rem}.h-3{height:0.75rem}.h-5{height:1.25rem}.h-full{height:100%}.min-h-full{min-height:100%}.w-2{width:0.5rem}.w-20{width:5rem}.w-5{width:1.25rem}.w-full{width:100%}.max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-lg{max-width:32rem}.-translate-x-1\/2{--tw-translate-x:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\/2{--tw-translate-y:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite}.cursor-pointer{cursor:pointer}.grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.space-y-2 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.rounded{border-radius:0.25rem}.rounded-2xl{border-radius:1rem}.rounded-3xl{border-radius:1.5rem}.rounded-full{border-radius:9999px}.rounded-xl{border-radius:0.75rem}.border-2{border-width:2px}.border-4{border-width:4px}.border-blue-200{--tw-border-opacity:1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-300{--tw-border-opacity:1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.border-emerald-300{--tw-border-opacity:1;border-color:rgb(110 231 183 / var(--tw-border-opacity, 1))}.border-orange-200{--tw-border-opacity:1;border-color:rgb(254 215 170 / var(--tw-border-opacity, 1))}.border-orange-300{--tw-border-opacity:1;border-color:rgb(253 186 116 / var(--tw-border-opacity, 1))}.border-rose-300{--tw-border-opacity:1;border-color:rgb(253 164 175 / var(--tw-border-opacity, 1))}.border-slate-200{--tw-border-opacity:1;border-color:rgb(226 232 240 / var(--tw-border-opacity, 1))}.border-slate-300{--tw-border-opacity:1;border-color:rgb(203 213 225 / var(--tw-border-opacity, 1))}.border-violet-300{--tw-border-opacity:1;border-color:rgb(196 181 253 / var(--tw-border-opacity, 1))}.bg-black\/60{background-color:rgb(0 0 0 / 0.6)}.bg-orange-400{--tw-bg-opacity:1;background-color:rgb(251 146 60 / var(--tw-bg-opacity, 1))}.bg-pink-400{--tw-bg-opacity:1;background-color:rgb(244 114 182 / var(--tw-bg-opacity, 1))}.bg-purple-400{--tw-bg-opacity:1;background-color:rgb(192 132 252 / var(--tw-bg-opacity, 1))}.bg-slate-200{--tw-bg-opacity:1;background-color:rgb(226 232 240 / var(--tw-bg-opacity, 1))}.bg-slate-600{--tw-bg-opacity:1;background-color:rgb(71 85 105 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-gradient-to-br{background-image:linear-gradient(to bottom right, var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right, var(--tw-gradient-stops))}.from-amber-50{--tw-gradient-from:#fffbeb var(--tw-gradient-from-position);--tw-gradient-to:rgb(255 251 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-400{--tw-gradient-from:#60a5fa var(--tw-gradient-from-position);--tw-gradient-to:rgb(96 165 250 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-50{--tw-gradient-from:#eff6ff var(--tw-gradient-from-position);--tw-gradient-to:rgb(239 246 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-500{--tw-gradient-from:#3b82f6 var(--tw-gradient-from-position);--tw-gradient-to:rgb(59 130 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-600{--tw-gradient-from:#2563eb var(--tw-gradient-from-position);--tw-gradient-to:rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-emerald-400{--tw-gradient-from:#34d399 var(--tw-gradient-from-position);--tw-gradient-to:rgb(52 211 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-emerald-500{--tw-gradient-from:#10b981 var(--tw-gradient-from-position);--tw-gradient-to:rgb(16 185 129 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-400{--tw-gradient-from:#fb923c var(--tw-gradient-from-position);--tw-gradient-to:rgb(251 146 60 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-50{--tw-gradient-from:#fff7ed var(--tw-gradient-from-position);--tw-gradient-to:rgb(255 247 237 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-500{--tw-gradient-from:#f97316 var(--tw-gradient-from-position);--tw-gradient-to:rgb(249 115 22 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-600{--tw-gradient-from:#ea580c var(--tw-gradient-from-position);--tw-gradient-to:rgb(234 88 12 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-pink-500{--tw-gradient-from:#ec4899 var(--tw-gradient-from-position);--tw-gradient-to:rgb(236 72 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-500{--tw-gradient-from:#a855f7 var(--tw-gradient-from-position);--tw-gradient-to:rgb(168 85 247 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-600{--tw-gradient-from:#9333ea var(--tw-gradient-from-position);--tw-gradient-to:rgb(147 51 234 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-red-500{--tw-gradient-from:#ef4444 var(--tw-gradient-from-position);--tw-gradient-to:rgb(239 68 68 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-rose-400{--tw-gradient-from:#fb7185 var(--tw-gradient-from-position);--tw-gradient-to:rgb(251 113 133 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-rose-500{--tw-gradient-from:#f43f5e var(--tw-gradient-from-position);--tw-gradient-to:rgb(244 63 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-slate-500{--tw-gradient-from:#64748b var(--tw-gradient-from-position);--tw-gradient-to:rgb(100 116 139 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-violet-400{--tw-gradient-from:#a78bfa var(--tw-gradient-from-position);--tw-gradient-to:rgb(167 139 250 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-white{--tw-gradient-from:#fff var(--tw-gradient-from-position);--tw-gradient-to:rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.via-orange-50{--tw-gradient-to:rgb(255 247 237 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), #fff7ed var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-pink-500{--tw-gradient-to:rgb(236 72 153 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), #ec4899 var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-pink-600{--tw-gradient-to:rgb(219 39 119 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), #db2777 var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-blue-500{--tw-gradient-to:#3b82f6 var(--tw-gradient-to-position)}.to-blue-600{--tw-gradient-to:#2563eb var(--tw-gradient-to-position)}.to-emerald-500{--tw-gradient-to:#10b981 var(--tw-gradient-to-position)}.to-emerald-600{--tw-gradient-to:#059669 var(--tw-gradient-to-position)}.to-orange-500{--tw-gradient-to:#f97316 var(--tw-gradient-to-position)}.to-orange-600{--tw-gradient-to:#ea580c var(--tw-gradient-to-position)}.to-pink-600{--tw-gradient-to:#db2777 var(--tw-gradient-to-position)}.to-purple-50{--tw-gradient-to:#faf5ff var(--tw-gradient-to-position)}.to-purple-500{--tw-gradient-to:#a855f7 var(--tw-gradient-to-position)}.to-purple-600{--tw-gradient-to:#9333ea var(--tw-gradient-to-position)}.to-red-50{--tw-gradient-to:#fef2f2 var(--tw-gradient-to-position)}.to-red-500{--tw-gradient-to:#ef4444 var(--tw-gradient-to-position)}.to-red-600{--tw-gradient-to:#dc2626 var(--tw-gradient-to-position)}.to-rose-500{--tw-gradient-to:#f43f5e var(--tw-gradient-to-position)}.to-rose-600{--tw-gradient-to:#e11d48 var(--tw-gradient-to-position)}.to-slate-50{--tw-gradient-to:#f8fafc var(--tw-gradient-to-position)}.to-slate-600{--tw-gradient-to:#475569 var(--tw-gradient-to-position)}.to-violet-500{--tw-gradient-to:#8b5cf6 var(--tw-gradient-to-position)}.to-yellow-50{--tw-gradient-to:#fefce8 var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.p-10{padding:2.5rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.text-left{text-align:left}.text-center{text-align:center}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-5xl{font-size:3rem;line-height:1}.text-6xl{font-size:3.75rem;line-height:1}.text-7xl{font-size:4.5rem;line-height:1}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-black{font-weight:900}.font-bold{font-weight:700}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.tracking-tight{letter-spacing:-0.025em}.tracking-wider{letter-spacing:0.05em}.text-blue-100{--tw-text-opacity:1;color:rgb(219 234 254 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-emerald-600{--tw-text-opacity:1;color:rgb(5 150 105 / var(--tw-text-opacity, 1))}.text-orange-100{--tw-text-opacity:1;color:rgb(255 237 213 / var(--tw-text-opacity, 1))}.text-orange-600{--tw-text-opacity:1;color:rgb(234 88 12 / var(--tw-text-opacity, 1))}.text-pink-600{--tw-text-opacity:1;color:rgb(219 39 119 / var(--tw-text-opacity, 1))}.text-purple-600{--tw-text-opacity:1;color:rgb(147 51 234 / var(--tw-text-opacity, 1))}.text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184 / var(--tw-text-opacity, 1))}.text-slate-500{--tw-text-opacity:1;color:rgb(100 116 139 / var(--tw-text-opacity, 1))}.text-slate-600{--tw-text-opacity:1;color:rgb(71 85 105 / var(--tw-text-opacity, 1))}.text-slate-700{--tw-text-opacity:1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}.text-slate-800{--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}.text-transparent{color:transparent}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-white\/80{color:rgb(255 255 255 / 0.8)}.underline{-webkit-text-decoration-line:underline;text-decoration-line:underline}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-inner{--tw-shadow:inset 0 2px 4px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.backdrop-blur-sm{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-500{transition-duration:500ms}.ease-out{transition-timing-function:cubic-bezier(0, 0, 0.2, 1)}.hover\:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:bg-slate-700:hover{--tw-bg-opacity:1;background-color:rgb(51 65 85 / var(--tw-bg-opacity, 1))}.hover\:from-blue-600:hover{--tw-gradient-from:#2563eb var(--tw-gradient-from-position);--tw-gradient-to:rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:from-slate-600:hover{--tw-gradient-from:#475569 var(--tw-gradient-from-position);--tw-gradient-to:rgb(71 85 105 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:to-purple-600:hover{--tw-gradient-to:#9333ea var(--tw-gradient-to-position)}.hover\:to-slate-700:hover{--tw-gradient-to:#334155 var(--tw-gradient-to-position)}.hover\:text-slate-800:hover{--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}.focus\:ring-0:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}@media (min-width: 768px){.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.md\:p-6{padding:1.5rem}.md\:text-5xl{font-size:3rem;line-height:1}.md\:text-7xl{font-size:4.5rem;line-height:1}.md\:text-lg{font-size:1.125rem;line-height:1.75rem}}</style></head>
 <body class="h-full bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50 overflow-auto">
  <div id="app-container" class="w-full min-h-full p-4 md:p-6"><!-- Main Menu Screen -->
   <div id="main-menu" class="max-w-4xl mx-auto"><!-- Header -->
    <div class="text-center mb-6">
     <h1 id="main-title" class="text-3xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 mb-3">‚ö° Grafies R/RR ¬∑ L/LL/L¬∑L ¬∑ H/‚àÖ</h1>
     <p id="instruction-text" class="text-slate-700 text-base md:text-lg font-semibold">Completa la paraula amb la grafia que pertoca: R, RR, L, LL, L¬∑L, H o ‚àÖ</p>
     <div class="mt-2 flex justify-center items-center gap-2"><input type="checkbox" id="toggle-hints" class="h-5 w-5 rounded border-2 border-slate-300 text-purple-600 focus:ring-0"> <label for="toggle-hints" class="text-slate-700 text-sm font-semibold">Mostra pistes (singular/base)</label>
     </div>
    </div><!-- Mode Selection -->
    <div class="grid md:grid-cols-2 gap-6 mb-8"><!-- Practice Mode -->
     <div class="mode-card bg-gradient-to-br from-blue-400 to-blue-500 rounded-3xl p-8 shadow-2xl border-4 border-blue-300 cursor-pointer" id="practice-mode-btn">
      <div class="text-center text-white">
       <div class="text-6xl mb-4">
        üìö
       </div>
       <h2 class="text-3xl font-black mb-3">Mode Pr√†ctica</h2>
       <p class="text-blue-100 font-semibold mb-4">S√®ries de 10 paraules</p>
       <ul class="text-left text-blue-100 text-sm space-y-2 mb-6">
        <li>‚úì Sense l√≠mit de temps</li>
        <li>‚úì Continua quan vulguis</li>
        <li>‚úì Perfecte per aprendre</li>
       </ul>
       <div class="bg-white text-blue-600 font-black py-3 px-6 rounded-full">
        Comen√ßar
       </div>
      </div>
     </div><!-- Competition Mode -->
     <div class="mode-card bg-gradient-to-br from-orange-400 to-red-500 rounded-3xl p-8 shadow-2xl border-4 border-orange-300 cursor-pointer" id="competition-mode-btn">
      <div class="text-center text-white">
       <div class="text-6xl mb-4">
        ‚è±Ô∏è
       </div>
       <h2 class="text-3xl font-black mb-3">Mode Competici√≥</h2>
       <p class="text-orange-100 font-semibold mb-4">2 minuts de repte</p>
       <ul class="text-left text-orange-100 text-sm space-y-2 mb-6">
        <li>‚úì Contra el cron√≤metre</li>
        <li>‚úì Encerts i ratxa</li>
        <li>‚úì Sense r√†nquing</li>
       </ul>
       <div class="bg-white text-orange-600 font-black py-3 px-6 rounded-full">
        Competir
       </div>
      </div>
     </div>
    </div>
   </div><!-- Game Screen -->
   <div id="game-screen" class="hidden"><!-- Header with back button -->
    <div class="flex justify-between items-center mb-4"><button id="back-to-menu-btn" class="bg-slate-600 hover:bg-slate-700 text-white font-bold py-2 px-4 rounded-full shadow-lg"> ‚Üê Men√∫ </button>
     <div id="mode-indicator" class="text-lg font-black text-slate-700"></div>
     <div class="w-20"></div>
    </div><!-- Timer -->
    <div id="timer-container" class="hidden text-center mb-4">
     <div class="bg-gradient-to-br from-red-500 to-orange-500 text-white rounded-2xl px-8 py-4 inline-block shadow-lg">
      <div class="text-sm font-bold uppercase tracking-wider">
       Temps Restant
      </div>
      <div class="text-4xl font-black">
       <span id="timer">2:00</span>
      </div>
     </div>
    </div><!-- Score Dashboard -->
    <div class="flex flex-wrap justify-center gap-3 mb-6 max-w-4xl mx-auto">
     <div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl px-6 py-3 shadow-lg">
      <div class="text-white/80 text-xs font-bold uppercase tracking-wider">
       Punts
      </div>
      <div class="text-white text-2xl font-black">
       <span id="points">0</span> pts
      </div>
     </div>
     <div class="bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl px-6 py-3 shadow-lg">
      <div class="text-white/80 text-xs font-bold uppercase tracking-wider">
       Encerts
      </div>
      <div class="text-white text-2xl font-black">
       <span id="correct-count">0</span>
      </div>
     </div>
     <div class="bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl px-6 py-3 shadow-lg">
      <div class="text-white/80 text-xs font-bold uppercase tracking-wider">
       Ratxa
      </div>
      <div class="text-white text-2xl font-black">
       üî• <span id="streak">0</span>
      </div>
     </div>
     <div id="round-display" class="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl px-6 py-3 shadow-lg">
      <div class="text-white/80 text-xs font-bold uppercase tracking-wider">
       Paraules
      </div>
      <div class="text-white text-2xl font-black">
       <span id="words-completed">0</span>/10
      </div>
     </div>
    </div><!-- Progress Bar -->
    <div class="max-w-3xl mx-auto mb-6">
     <div class="bg-slate-200 rounded-full h-3 overflow-hidden shadow-inner">
      <div id="progress-bar" class="bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 h-full transition-all duration-500 ease-out" style="width: 0%"></div>
     </div>
    </div><!-- Grafia Buttons -->
    <div class="flex flex-wrap justify-center gap-3 mb-6 max-w-3xl mx-auto"><button class="grafia-button bg-gradient-to-br from-rose-400 to-rose-500 text-white rounded-2xl px-6 py-3 shadow-lg border-4 border-rose-300" data-grafia="r"><span class="text-3xl font-black">R</span></button> <button class="grafia-button bg-gradient-to-br from-rose-500 to-rose-600 text-white rounded-2xl px-6 py-3 shadow-lg border-4 border-rose-300" data-grafia="rr"><span class="text-3xl font-black">RR</span></button> <button class="grafia-button bg-gradient-to-br from-blue-400 to-blue-500 text-white rounded-2xl px-6 py-3 shadow-lg border-4 border-blue-300" data-grafia="l"><span class="text-3xl font-black">L</span></button> <button class="grafia-button bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-2xl px-6 py-3 shadow-lg border-4 border-blue-300" data-grafia="ll"><span class="text-3xl font-black">LL</span></button> <button class="grafia-button bg-gradient-to-br from-emerald-400 to-emerald-500 text-white rounded-2xl px-6 py-3 shadow-lg border-4 border-emerald-300" data-grafia="l¬∑l"><span class="text-3xl font-black">L¬∑L</span></button> <button class="grafia-button bg-gradient-to-br from-violet-400 to-violet-500 text-white rounded-2xl px-6 py-3 shadow-lg border-4 border-violet-300" data-grafia="h"><span class="text-3xl font-black">H</span></button> <button class="grafia-button bg-gradient-to-br from-orange-400 to-orange-500 text-white rounded-2xl px-6 py-3 shadow-lg border-4 border-orange-300" data-grafia="‚àÖ"><span class="text-3xl font-black">‚àÖ</span></button>
    </div><!-- Current Word Display -->
    <div class="max-w-2xl mx-auto mb-6">
     <div class="bg-gradient-to-br from-white to-slate-50 rounded-3xl p-8 shadow-2xl border-4 border-slate-200">
      <div class="text-center">
       <div class="text-slate-500 text-sm font-bold uppercase tracking-wider mb-3">
        Quina √©s la grafia correcta?
       </div>
       <div id="current-word" class="text-5xl md:text-7xl font-black text-slate-800 mb-4 tracking-tight"></div>
       <div id="word-hint" class="text-slate-400 text-sm font-semibold italic hidden mt-2"></div>
       <div class="flex justify-center gap-2 mt-4">
        <div class="h-2 w-2 bg-purple-400 rounded-full animate-pulse"></div>
        <div class="h-2 w-2 bg-pink-400 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
        <div class="h-2 w-2 bg-orange-400 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
       </div>
      </div>
     </div>
    </div><!-- Feedback Message -->
    <div id="feedback-message" class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 hidden">
     <div id="feedback-content" class="bg-white rounded-3xl px-8 py-6 shadow-2xl border-4 text-center">
      <div id="feedback-icon" class="text-6xl mb-2"></div>
      <div id="feedback-text" class="text-2xl font-black"></div>
      <div id="feedback-points" class="text-lg font-bold mt-1"></div>
     </div>
    </div>
   </div><!-- Series Completion Modal (Practice Mode) -->
   <div id="series-completion" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50">
    <div class="bg-gradient-to-br from-blue-50 to-purple-50 rounded-3xl p-10 text-center shadow-2xl max-w-lg mx-4 border-4 border-blue-200">
     <div class="text-7xl mb-4">
      üéâ
     </div>
     <h2 class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-3">S√®rie Completada!</h2>
     <div class="bg-white rounded-2xl p-6 mb-6 shadow-lg">
      <div class="grid grid-cols-2 gap-4">
       <div>
        <div class="text-3xl font-black text-purple-600">
         <span id="series-points">0</span>
        </div>
        <div class="text-xs text-slate-600 font-bold uppercase">
         Punts
        </div>
       </div>
       <div>
        <div class="text-3xl font-black text-emerald-600">
         <span id="series-correct">0</span>/10
        </div>
        <div class="text-xs text-slate-600 font-bold uppercase">
         Encerts
        </div>
       </div>
      </div>
     </div>
     <div class="flex gap-3 justify-center"><button id="continue-btn" class="bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all"> ‚ûú Continuar (10 m√©s) </button> <button id="finish-practice-btn" class="bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all"> ‚úì Acabar </button>
     </div>
    </div>
   </div><!-- Competition End Modal -->
   <div id="competition-end" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50">
    <div class="bg-gradient-to-br from-orange-50 to-red-50 rounded-3xl p-10 text-center shadow-2xl max-w-lg mx-4 border-4 border-orange-200">
     <div class="text-7xl mb-4">
      üèÜ
     </div>
     <h2 class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-orange-600 to-red-600 mb-3">Temps Acabat!</h2>
     <div class="bg-white rounded-2xl p-6 mb-6 shadow-lg">
      <div class="grid grid-cols-2 gap-4">
       <div>
        <div class="text-3xl font-black text-purple-600">
         <span id="comp-points">0</span>
        </div>
        <div class="text-xs text-slate-600 font-bold uppercase">
         Punts Totals
        </div>
       </div>
       <div>
        <div class="text-3xl font-black text-emerald-600">
         <span id="comp-correct">0</span>
        </div>
        <div class="text-xs text-slate-600 font-bold uppercase">
         Encerts
        </div>
       </div>
       <div>
        <div class="text-3xl font-black text-pink-600">
         <span id="comp-streak">0</span>
        </div>
        <div class="text-xs text-slate-600 font-bold uppercase">
         Millor Ratxa
        </div>
       </div>
       <div>
        <div class="text-3xl font-black text-orange-600">
         <span id="comp-accuracy">0</span>%
        </div>
        <div class="text-xs text-slate-600 font-bold uppercase">
         Precisi√≥
        </div>
       </div>
      </div>
     </div><button id="back-from-comp-btn" class="mt-2 text-slate-600 hover:text-slate-800 font-bold underline"> Tornar al men√∫ </button>
    </div>
   </div>
  </div>
  <script>
// Word database ‚Äì 137 paraules
const wordsData = [
  { word: "carota", grafia: "r" },
  { word: "arena", grafia: "r" },
  { word: "aroma", grafia: "r" },
  { word: "peregr√≠", grafia: "r" },
  { word: "caravana", grafia: "r" },
  { word: "teranyina", grafia: "r" },
  { word: "car√≠cia", grafia: "r" },
  { word: "baricentre", grafia: "r" },
  { word: "firma", grafia: "r" },
  { word: "morir", grafia: "r" },
  { word: "coral", grafia: "r" },
  { word: "ferotge", grafia: "r" },
  { word: "parada", grafia: "r" },
  { word: "orador", grafia: "r" },
  { word: "c√†rrega", grafia: "rr" },
  { word: "terrat", grafia: "rr" },
  { word: "c√≥rrer", grafia: "rr" },
  { word: "forra", grafia: "rr" },
  { word: "gerrer", grafia: "rr" },
  { word: "terror", grafia: "rr" },
  { word: "carril", grafia: "rr" },
  { word: "corro", grafia: "rr" },
  { word: "terrassa", grafia: "rr" },
  { word: "arrencar", grafia: "rr" },
  { word: "barrera", grafia: "rr" },
  { word: "corretja", grafia: "rr" },
  { word: "terr√≠cola", grafia: "rr" },
  { word: "alegria", grafia: "l" },
  { word: "soluci√≥", grafia: "l" },
  { word: "celebrar", grafia: "l" },
  { word: "elaborar", grafia: "l" },
  { word: "solitud", grafia: "l" },
  { word: "selecci√≥", grafia: "l" },
  { word: "dilema", grafia: "l" },
  { word: "solar", grafia: "l" },
  { word: "elegir", grafia: "l" },
  { word: "mol√≠", grafia: "l" },
  { word: "salat", grafia: "l" },
  { word: "talent", grafia: "l" },
  { word: "valor", grafia: "l" },
  { word: "velocitat", grafia: "l" },
  { word: "bullir", grafia: "ll" },
  { word: "callar", grafia: "ll" },
  { word: "collir", grafia: "ll" },
  { word: "trellat", grafia: "ll" },
  { word: "mollar", grafia: "ll" },
  { word: "fallida", grafia: "ll" },
  { word: "brillant", grafia: "ll" },
  { word: "llamp", grafia: "ll" },
  { word: "llenya", grafia: "ll" },
  { word: "lleganya", grafia: "ll" },
  { word: "motxilla", grafia: "ll" },
  { word: "porcellana", grafia: "ll" },
  { word: "anella", grafia: "ll" },
  { word: "c√®l¬∑lula", grafia: "l¬∑l" },
  { word: "al¬∑legar", grafia: "l¬∑l" },
  { word: "al¬∑leluia", grafia: "l¬∑l" },
  { word: "al¬∑l√®rgia", grafia: "l¬∑l" },
  { word: "al¬∑licient", grafia: "l¬∑l" },
  { word: "al¬∑lucinar", grafia: "l¬∑l" },
  { word: "col¬∑laborar", grafia: "l¬∑l" },
  { word: "col¬∑locar", grafia: "l¬∑l" },
  { word: "col¬∑lapse", grafia: "l¬∑l" },
  { word: "col¬∑lectiu", grafia: "l¬∑l" },
  { word: "col¬∑legi", grafia: "l¬∑l" },
  { word: "col¬∑lega", grafia: "l¬∑l" },
  { word: "col¬∑lisi√≥", grafia: "l¬∑l" },
  { word: "col¬∑loqui", grafia: "l¬∑l" },
  { word: "il¬∑legal", grafia: "l¬∑l" },
  { word: "il¬∑legible", grafia: "l¬∑l" },
  { word: "il¬∑l√®s", grafia: "l¬∑l" },
  { word: "il¬∑l√≠cit", grafia: "l¬∑l" },
  { word: "il¬∑limitat", grafia: "l¬∑l" },
  { word: "il¬∑l√≤gic", grafia: "l¬∑l" },
  { word: "pol¬∑len", grafia: "l¬∑l" },
  { word: "mil¬∑lenari", grafia: "l¬∑l" },
  { word: "mil¬∑lenni", grafia: "l¬∑l" },
  { word: "mil¬∑l√®sim", grafia: "l¬∑l" },
  { word: "mil¬∑ligram", grafia: "l¬∑l" },
  { word: "mil¬∑l√≠metre", grafia: "l¬∑l" },
  { word: "s√≠l¬∑laba", grafia: "l¬∑l" },
  { word: "sil¬∑lepsi", grafia: "l¬∑l" },
  { word: "sil¬∑logisme", grafia: "l¬∑l" },
  { word: "col¬∑lecci√≥", grafia: "l¬∑l" },
  { word: "il¬∑lusi√≥", grafia: "l¬∑l" },
  { word: "novel¬∑la", grafia: "l¬∑l" },
  { word: "parcel¬∑la", grafia: "l¬∑l" },
  { word: "tranquil¬∑la", grafia: "l¬∑l" },
  { word: "intel¬∑ligent", grafia: "l¬∑l" },
  { word: "sat√®l¬∑lit", grafia: "l¬∑l" },
  { word: "excel¬∑lent", grafia: "l¬∑l" },
  { word: "ham", grafia: "h" },
  { word: "hemorr√†gia", grafia: "h" },
  { word: "heterosexual", grafia: "h" },
  { word: "hissar", grafia: "h" },
  { word: "homogeni", grafia: "h" },
  { word: "harmonia", grafia: "h" },
  { word: "herba", grafia: "h" },
  { word: "higiene", grafia: "h" },
  { word: "hivern", grafia: "h" },
  { word: "hoquei", grafia: "h" },
  { word: "hemisferi", grafia: "h" },
  { word: "hereu", grafia: "h" },
  { word: "hip√≤tesi", grafia: "h" },
  { word: "homicida", grafia: "h" },
  { word: "humitat", grafia: "h" },
  { word: "adherir", grafia: "h" },
  { word: "Est_er", grafia: "‚àÖ" },
  { word: "Vic_", grafia: "‚àÖ" },
  { word: "_orfe", grafia: "‚àÖ" },
  { word: "ex_uberant", grafia: "‚àÖ" },
  { word: "caca_uet", grafia: "‚àÖ" },
  { word: "Montblanc_", grafia: "‚àÖ" },
  { word: "Judit_", grafia: "‚àÖ" },
  { word: "_ou", grafia: "‚àÖ" },
  { word: "co_et", grafia: "‚àÖ" }
];

// Game state
let currentMode = null;
let points = 0;
let correctCount = 0;
let errorCount = 0;
let streak = 0;
let bestStreak = 0;
let currentWordIndex = 0;
let shuffledWords = [];
let currentWord = null;
let wordsPerSeries = 10;
let currentSeriesWords = 0;

// Hints preference
let showHints = JSON.parse(localStorage.getItem('show_hints') ?? 'false');
window.addEventListener('DOMContentLoaded', () => {
  const hintsToggle = document.getElementById('toggle-hints');
  if (hintsToggle) {
    hintsToggle.checked = showHints;
    hintsToggle.addEventListener('change', (e) => {
      showHints = !!e.target.checked;
      localStorage.setItem('show_hints', JSON.stringify(showHints));
    });
  }
});
window.addEventListener('keydown', (ev) => {
  if (ev.key.toLowerCase() === 'h' && currentMode === 'practice') {
    showHints = !showHints;
    localStorage.setItem('show_hints', JSON.stringify(showHints));
    const t = document.getElementById('toggle-hints');
    if (t) t.checked = showHints;
  }
});

// Competition mode
let timerInterval = null;
let timeRemaining = 120;
let isGameActive = false;

const defaultConfig = {
  activity_title: "‚ö° Grafies R/RR ¬∑ L/LL/L¬∑L ¬∑ H/‚àÖ",
  instruction_text: "Completa la paraula amb la grafia que pertoca: R, RR, L, LL, L¬∑L, H o ‚àÖ"
};

function shuffleArray(array) {
  const shuffled = [...array];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  return shuffled;
}

function showScreen(screenId) {
  document.getElementById('main-menu').classList.add('hidden');
  document.getElementById('game-screen').classList.add('hidden');
  document.getElementById('series-completion').classList.add('hidden');
  document.getElementById('competition-end').classList.add('hidden');
  document.getElementById(screenId).classList.remove('hidden');
}

function startPracticeMode() {
  currentMode = 'practice';
  resetGameState();
  shuffledWords = shuffleArray([...wordsData]);
  document.getElementById('mode-indicator').textContent = 'üìö Mode Pr√†ctica';
  document.getElementById('timer-container').classList.add('hidden');
  document.getElementById('round-display').classList.remove('hidden');
  showScreen('game-screen');
  showNextWord();
}

function startCompetitionMode() {
  currentMode = 'competition';
  resetGameState();
  shuffledWords = shuffleArray([...wordsData]);
  timeRemaining = 120;
  isGameActive = true;
  document.getElementById('mode-indicator').textContent = '‚è±Ô∏è Mode Competici√≥';
  document.getElementById('timer-container').classList.remove('hidden');
  document.getElementById('round-display').classList.remove('hidden');
  showScreen('game-screen');
  startTimer();
  showNextWord();
}

function startTimer() {
  updateTimerDisplay();
  timerInterval = setInterval(() => {
    if (!isGameActive) { clearInterval(timerInterval); return; }
    timeRemaining--;
    updateTimerDisplay();
    if (timeRemaining <= 0) { endCompetition(); }
  }, 1000);
}

function updateTimerDisplay() {
  const minutes = Math.floor(timeRemaining / 60);
  const seconds = timeRemaining % 60;
  document.getElementById('timer').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
}

function endCompetition() {
  isGameActive = false;
  clearInterval(timerInterval);
  const totalAttempts = correctCount + errorCount;
  const accuracy = totalAttempts > 0 ? Math.round((correctCount / totalAttempts) * 100) : 0;
  document.getElementById('comp-points').textContent = points;
  document.getElementById('comp-correct').textContent = correctCount;
  document.getElementById('comp-streak').textContent = bestStreak;
  document.getElementById('comp-accuracy').textContent = accuracy;
  document.getElementById('competition-end').classList.remove('hidden');
  playCompletionSound();
  createConfetti();
}

function resetGameState() {
  points = 0; correctCount = 0; errorCount = 0; streak = 0; bestStreak = 0;
  currentWordIndex = 0; currentSeriesWords = 0;
  document.getElementById('points').textContent = '0';
  document.getElementById('correct-count').textContent = '0';
  document.getElementById('streak').textContent = '0';
  document.getElementById('words-completed').textContent = '0';
  document.getElementById('progress-bar').style.width = '0%';
}

function showNextWord() {
  if (currentMode === 'practice' && currentSeriesWords >= wordsPerSeries) { showSeriesCompletion(); return; }
  if (currentWordIndex >= shuffledWords.length) { shuffledWords = shuffleArray([...wordsData]); currentWordIndex = 0; }
  currentWord = shuffledWords[currentWordIndex];
  const wordDisplay = document.getElementById('current-word');

  let displayWord = currentWord.word;
  const g = currentWord.grafia.toLowerCase();
  let regex;
  if (g === 'r') regex = /r/gi;
  else if (g === 'rr') regex = /rr/gi;
  else if (g === 'l') regex = /l(?!¬∑l)/gi;
  else if (g === 'll') regex = /ll/gi;
  else if (g === 'l¬∑l') regex = /l¬∑l/gi;
  else if (g === 'h') regex = /h/gi;
  else if (g === '‚àÖ') regex = null;

  if (regex) displayWord = displayWord.replace(regex, '_');
  if (showHints && currentMode === 'practice' && currentWord.hint) {
    displayWord += ' ' + currentWord.hint;
  }
  wordDisplay.textContent = displayWord;
  wordDisplay.style.animation = 'none';
  setTimeout(() => { wordDisplay.style.animation = 'fadeIn 0.5s ease'; }, 10);
  document.getElementById('word-hint').classList.add('hidden');

  if (currentMode === 'practice') {
    document.getElementById('words-completed').textContent = currentSeriesWords;
    document.getElementById('progress-bar').style.width = (currentSeriesWords / wordsPerSeries) * 100 + '%';
  } else {
    document.getElementById('words-completed').textContent = correctCount;
    document.getElementById('progress-bar').style.width = '100%';
  }
}

function setupGrafiaButtons() {
  document.querySelectorAll('.grafia-button').forEach(btn => {
    btn.addEventListener('click', () => {
      if (!currentWord || !isGameActive) return;
      handleAnswer(btn.dataset.grafia);
    });
  });
}

function handleAnswer(selectedGrafia) {
  if (!currentWord) return;
  const isCorrect = selectedGrafia === currentWord.grafia;
  if (isCorrect) {
    streak++; if (streak > bestStreak) bestStreak = streak;
    let pointsEarned = 10; if (streak >= 5) pointsEarned = 20; if (streak >= 10) pointsEarned = 30;
    points += pointsEarned; correctCount++;
    document.getElementById('points').textContent = points;
    document.getElementById('correct-count').textContent = correctCount;
    document.getElementById('streak').textContent = streak;
    showFeedback(true, pointsEarned);
  } else {
    errorCount++; streak = 0; document.getElementById('streak').textContent = streak; showFeedback(false, 0);
  }
  currentWordIndex++; currentSeriesWords++;
  setTimeout(showNextWord, 3000);
}

function showSeriesCompletion() {
  isGameActive = false;
  document.getElementById('series-points').textContent = points;
  document.getElementById('series-correct').textContent = correctCount;
  document.getElementById('series-completion').classList.remove('hidden');
  playCompletionSound();
}

function continueNextSeries() {
  currentSeriesWords = 0; isGameActive = true;
  document.getElementById('series-completion').classList.add('hidden');
  document.getElementById('words-completed').textContent = '0';
  document.getElementById('progress-bar').style.width = '0%';
  showNextWord();
}

// Sounds
const audioContext = new (window.AudioContext || window.webkitAudioContext)();
function playCorrectSound() {
  const o = audioContext.createOscillator(); const g = audioContext.createGain(); o.connect(g); g.connect(audioContext.destination);
  o.frequency.setValueAtTime(523.25, audioContext.currentTime);
  o.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
  o.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);
  g.gain.setValueAtTime(0.3, audioContext.currentTime);
  g.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
  o.start(audioContext.currentTime); o.stop(audioContext.currentTime + 0.4);
}
function playStreakSound() {
  const o = audioContext.createOscillator(); const g = audioContext.createGain(); o.connect(g); g.connect(audioContext.destination);
  o.type = 'triangle'; o.frequency.setValueAtTime(880, audioContext.currentTime);
  o.frequency.exponentialRampToValueAtTime(1760, audioContext.currentTime + 0.2);
  g.gain.setValueAtTime(0.4, audioContext.currentTime); g.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
  o.start(audioContext.currentTime); o.stop(audioContext.currentTime + 0.3);
}
function playIncorrectSound() {
  const o = audioContext.createOscillator(); const g = audioContext.createGain(); o.connect(g); g.connect(audioContext.destination);
  o.type = 'sawtooth'; o.frequency.setValueAtTime(200, audioContext.currentTime);
  o.frequency.exponentialRampToValueAtTime(100, audioContext.currentTime + 0.3);
  g.gain.setValueAtTime(0.2, audioContext.currentTime); g.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
  o.start(audioContext.currentTime); o.stop(audioContext.currentTime + 0.3);
}
function playCompletionSound() {
  [523.25, 659.25, 783.99, 1046.50].forEach((f, i) => {
    setTimeout(() => { const o = audioContext.createOscillator(); const g = audioContext.createGain(); o.connect(g); g.connect(audioContext.destination);
      o.frequency.setValueAtTime(f, audioContext.currentTime);
      g.gain.setValueAtTime(0.3, audioContext.currentTime); g.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
      o.start(audioContext.currentTime); o.stop(audioContext.currentTime + 0.5); }, i * 100);
  });
}

function showFeedback(isCorrect, pts) {
  const feedback = document.getElementById('feedback-message');
  const icon = document.getElementById('feedback-icon');
  const text = document.getElementById('feedback-text');
  const pointsText = document.getElementById('feedback-points');
  const content = document.getElementById('feedback-content');
  const hint = document.getElementById('word-hint');
  hint.textContent = 'Paraula completa: ' + currentWord.word; hint.classList.remove('hidden');
  if (isCorrect) {
    if (streak >= 5) { playStreakSound(); } else { playCorrectSound(); }
    icon.textContent = '‚úì'; text.textContent = currentWord.word; text.style.color = '#0f172a'; text.style.fontSize='3rem'; text.style.fontWeight='900'; content.style.borderColor = '#10b981';
    pointsText.textContent = '+' + pts + ' punts'; pointsText.style.color = '#8b5cf6';
    if (streak >= 5) { pointsText.textContent = '+' + pts + ' punts ¬∑ üî• Incre√Øble!'; }
    if (streak >= 10) { pointsText.textContent = '+' + pts + ' punts ¬∑ ‚ö° Imparable!'; }
  } else {
    playIncorrectSound(); icon.textContent = '‚úó'; text.textContent = 'Incorrecte'; text.style.color = '#ef4444'; content.style.borderColor = '#ef4444';
    pointsText.textContent = 'Correcte: ' + currentWord.grafia.toUpperCase(); pointsText.style.color = '#64748b';
  }
  feedback.classList.remove('hidden'); feedback.style.animation = 'fadeIn 0.3s ease';
  setTimeout(() => { feedback.classList.add('hidden'); }, 2500);
}

function createConfetti() {
  const colors = ['#f59e0b', '#10b981', '#3b82f6', '#8b5cf6', '#ef4444'];
  for (let i = 0; i < 50; i++) {
    setTimeout(() => {
      const c = document.createElement('div'); c.className = 'confetti';
      c.style.left = Math.random() * 100 + 'vw'; c.style.top = '-10px'; c.style.width = '10px'; c.style.height = '10px';
      c.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
      c.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
      c.style.transform = 'rotate(' + (Math.random() * 360) + 'deg)';
      document.body.appendChild(c);
      let y = -10; let x = parseFloat(c.style.left); let r = 0; const speed = 2 + Math.random() * 3; const drift = (Math.random() - 0.5) * 2;
      const fall = setInterval(() => {
        y += speed; x += drift; r += 5; c.style.top = y + 'px'; c.style.left = x + 'vw'; c.style.transform = 'rotate(' + r + 'deg)';
        if (y > window.innerHeight) { clearInterval(fall); c.remove(); }
      }, 20);
    }, i * 30);
  }
}

// Event Listeners
document.getElementById('practice-mode-btn').addEventListener('click', () => { isGameActive = true; startPracticeMode(); });
document.getElementById('competition-mode-btn').addEventListener('click', () => { isGameActive = true; startCompetitionMode(); });
document.getElementById('back-to-menu-btn').addEventListener('click', () => { isGameActive = false; clearInterval(timerInterval); showScreen('main-menu'); });
document.getElementById('continue-btn').addEventListener('click', () => { continueNextSeries(); });
document.getElementById('finish-practice-btn').addEventListener('click', () => { document.getElementById('series-completion').classList.add('hidden'); showScreen('main-menu'); });
document.getElementById('back-from-comp-btn').addEventListener('click', () => { document.getElementById('competition-end').classList.add('hidden'); showScreen('main-menu'); });

// Optional SDK
if (window.elementSdk) {
  const defaultConfig = { activity_title: '‚ö° Grafies R/RR ¬∑ L/LL/L¬∑L ¬∑ H/‚àÖ', instruction_text: 'Completa la paraula amb la grafia que pertoca: R, RR, L, LL, L¬∑L, H o ‚àÖ' };
  window.elementSdk.init({
    defaultConfig,
    onConfigChange: (config) => {
      document.getElementById('main-title').innerHTML = config.activity_title || defaultConfig.activity_title;
      document.getElementById('instruction-text').textContent = config.instruction_text || defaultConfig.instruction_text;
    },
    mapToCapabilities: () => ({ recolorables: [], borderables: [], fontEditable: undefined, fontSizeable: undefined }),
    mapToEditPanelValues: (config) => new Map([
      ['activity_title', (config && config.activity_title) || defaultConfig.activity_title],
      ['instruction_text', (config && config.instruction_text) || defaultConfig.instruction_text]
    ])
  });
}

// Init
(function init(){ setupGrafiaButtons(); })();
</script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cc4ccd6c31aca1e',t:'MTc3MDgyMjkxMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden;" src="./saved_resource(22).html"></iframe>
</body></html>