
<!-- saved from url=(0260)https://1379121260-atari-embeds.googleusercontent.com/embeds/16cb204cf3a9d4d223a0a3fd8b0eec5d/inner-frame-minified.html?jsh=m%3B%2F_%2Fscs%2Fabc-static%2F_%2Fjs%2Fk%3Dgapi.lb.ca.4fEANRLsRvk.O%2Fd%3D1%2Frs%3DAHpOoo-RVHSn6qq6rqaBbSZyXBD069WJlA%2Fm%3D__features__ -->
<html lang="ca" class="h-full"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!--<base target="_blank">--><base href="." target="_blank">


  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Entrena les Grafies ‚Äì G / J / TG / TJ / TX (v2)</title>
  <script src="./saved_resource"></script>
  <script src="./element_sdk.js.baixa"></script>
  <script src="./data_sdk.js.baixa"></script>
  <link href="./css2" rel="stylesheet">
  <style>
    body { box-sizing: border-box; }
    * { font-family: 'Poppins', sans-serif; }
    .grafia-button { transition: all 0.2s ease; position: relative; }
    .grafia-button:hover { transform: translateY(-2px); }
    .grafia-button:active { transform: scale(0.95); }
    .correct-animation { animation: correctPulse 0.5s ease; }
    .incorrect-animation { animation: shake 0.5s ease; }
    @keyframes correctPulse { 0%, 100% { transform: scale(1);} 50% { transform: scale(1.1);} }
    @keyframes shake { 0%, 100% { transform: translateX(0);} 25% { transform: translateX(-5px);} 75% { transform: translateX(5px);} }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px);} to { opacity: 1; transform: translateY(0);} }
    .confetti { position: fixed; pointer-events: none; z-index: 1000; }
    .mode-card { transition: all 0.3s ease; }
    .mode-card:hover { transform: translateY(-5px); }
  </style>
  <style>@view-transition { navigation: auto; }</style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.fixed{position:fixed}.inset-0{inset:0px}.left-1\/2{left:50%}.top-1\/2{top:50%}.z-50{z-index:50}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:0.5rem}.mb-3{margin-bottom:0.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mt-1{margin-top:0.25rem}.mt-2{margin-top:0.5rem}.mt-4{margin-top:1rem}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-2{height:0.5rem}.h-3{height:0.75rem}.h-full{height:100%}.min-h-full{min-height:100%}.w-2{width:0.5rem}.w-20{width:5rem}.w-full{width:100%}.max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-lg{max-width:32rem}.-translate-x-1\/2{--tw-translate-x:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\/2{--tw-translate-y:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite}.cursor-pointer{cursor:pointer}.grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.space-y-2 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}.space-y-3 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem * var(--tw-space-y-reverse))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.rounded-2xl{border-radius:1rem}.rounded-3xl{border-radius:1.5rem}.rounded-full{border-radius:9999px}.rounded-xl{border-radius:0.75rem}.border-4{border-width:4px}.border-blue-200{--tw-border-opacity:1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-300{--tw-border-opacity:1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.border-emerald-300{--tw-border-opacity:1;border-color:rgb(110 231 183 / var(--tw-border-opacity, 1))}.border-orange-200{--tw-border-opacity:1;border-color:rgb(254 215 170 / var(--tw-border-opacity, 1))}.border-orange-300{--tw-border-opacity:1;border-color:rgb(253 186 116 / var(--tw-border-opacity, 1))}.border-rose-300{--tw-border-opacity:1;border-color:rgb(253 164 175 / var(--tw-border-opacity, 1))}.border-slate-200{--tw-border-opacity:1;border-color:rgb(226 232 240 / var(--tw-border-opacity, 1))}.border-violet-300{--tw-border-opacity:1;border-color:rgb(196 181 253 / var(--tw-border-opacity, 1))}.border-yellow-200{--tw-border-opacity:1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1))}.bg-black\/60{background-color:rgb(0 0 0 / 0.6)}.bg-orange-400{--tw-bg-opacity:1;background-color:rgb(251 146 60 / var(--tw-bg-opacity, 1))}.bg-pink-400{--tw-bg-opacity:1;background-color:rgb(244 114 182 / var(--tw-bg-opacity, 1))}.bg-purple-400{--tw-bg-opacity:1;background-color:rgb(192 132 252 / var(--tw-bg-opacity, 1))}.bg-slate-200{--tw-bg-opacity:1;background-color:rgb(226 232 240 / var(--tw-bg-opacity, 1))}.bg-slate-600{--tw-bg-opacity:1;background-color:rgb(71 85 105 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-gradient-to-br{background-image:linear-gradient(to bottom right, var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right, var(--tw-gradient-stops))}.from-amber-50{--tw-gradient-from:#fffbeb var(--tw-gradient-from-position);--tw-gradient-to:rgb(255 251 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-400{--tw-gradient-from:#60a5fa var(--tw-gradient-from-position);--tw-gradient-to:rgb(96 165 250 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-50{--tw-gradient-from:#eff6ff var(--tw-gradient-from-position);--tw-gradient-to:rgb(239 246 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-500{--tw-gradient-from:#3b82f6 var(--tw-gradient-from-position);--tw-gradient-to:rgb(59 130 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-600{--tw-gradient-from:#2563eb var(--tw-gradient-from-position);--tw-gradient-to:rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-emerald-400{--tw-gradient-from:#34d399 var(--tw-gradient-from-position);--tw-gradient-to:rgb(52 211 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-emerald-500{--tw-gradient-from:#10b981 var(--tw-gradient-from-position);--tw-gradient-to:rgb(16 185 129 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-400{--tw-gradient-from:#fb923c var(--tw-gradient-from-position);--tw-gradient-to:rgb(251 146 60 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-50{--tw-gradient-from:#fff7ed var(--tw-gradient-from-position);--tw-gradient-to:rgb(255 247 237 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-500{--tw-gradient-from:#f97316 var(--tw-gradient-from-position);--tw-gradient-to:rgb(249 115 22 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-600{--tw-gradient-from:#ea580c var(--tw-gradient-from-position);--tw-gradient-to:rgb(234 88 12 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-pink-500{--tw-gradient-from:#ec4899 var(--tw-gradient-from-position);--tw-gradient-to:rgb(236 72 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-500{--tw-gradient-from:#a855f7 var(--tw-gradient-from-position);--tw-gradient-to:rgb(168 85 247 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-600{--tw-gradient-from:#9333ea var(--tw-gradient-from-position);--tw-gradient-to:rgb(147 51 234 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-red-500{--tw-gradient-from:#ef4444 var(--tw-gradient-from-position);--tw-gradient-to:rgb(239 68 68 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-rose-400{--tw-gradient-from:#fb7185 var(--tw-gradient-from-position);--tw-gradient-to:rgb(251 113 133 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-slate-500{--tw-gradient-from:#64748b var(--tw-gradient-from-position);--tw-gradient-to:rgb(100 116 139 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-slate-600{--tw-gradient-from:#475569 var(--tw-gradient-from-position);--tw-gradient-to:rgb(71 85 105 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-violet-400{--tw-gradient-from:#a78bfa var(--tw-gradient-from-position);--tw-gradient-to:rgb(167 139 250 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-white{--tw-gradient-from:#fff var(--tw-gradient-from-position);--tw-gradient-to:rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-yellow-600{--tw-gradient-from:#ca8a04 var(--tw-gradient-from-position);--tw-gradient-to:rgb(202 138 4 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.via-orange-50{--tw-gradient-to:rgb(255 247 237 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), #fff7ed var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-orange-600{--tw-gradient-to:rgb(234 88 12 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), #ea580c var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-pink-500{--tw-gradient-to:rgb(236 72 153 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), #ec4899 var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-pink-600{--tw-gradient-to:rgb(219 39 119 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), #db2777 var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-blue-500{--tw-gradient-to:#3b82f6 var(--tw-gradient-to-position)}.to-emerald-500{--tw-gradient-to:#10b981 var(--tw-gradient-to-position)}.to-emerald-600{--tw-gradient-to:#059669 var(--tw-gradient-to-position)}.to-orange-500{--tw-gradient-to:#f97316 var(--tw-gradient-to-position)}.to-orange-600{--tw-gradient-to:#ea580c var(--tw-gradient-to-position)}.to-pink-500{--tw-gradient-to:#ec4899 var(--tw-gradient-to-position)}.to-pink-600{--tw-gradient-to:#db2777 var(--tw-gradient-to-position)}.to-purple-50{--tw-gradient-to:#faf5ff var(--tw-gradient-to-position)}.to-purple-500{--tw-gradient-to:#a855f7 var(--tw-gradient-to-position)}.to-purple-600{--tw-gradient-to:#9333ea var(--tw-gradient-to-position)}.to-red-50{--tw-gradient-to:#fef2f2 var(--tw-gradient-to-position)}.to-red-500{--tw-gradient-to:#ef4444 var(--tw-gradient-to-position)}.to-red-600{--tw-gradient-to:#dc2626 var(--tw-gradient-to-position)}.to-rose-500{--tw-gradient-to:#f43f5e var(--tw-gradient-to-position)}.to-slate-50{--tw-gradient-to:#f8fafc var(--tw-gradient-to-position)}.to-slate-600{--tw-gradient-to:#475569 var(--tw-gradient-to-position)}.to-slate-700{--tw-gradient-to:#334155 var(--tw-gradient-to-position)}.to-violet-500{--tw-gradient-to:#8b5cf6 var(--tw-gradient-to-position)}.to-yellow-50{--tw-gradient-to:#fefce8 var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.p-10{padding:2.5rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.text-left{text-align:left}.text-center{text-align:center}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-5xl{font-size:3rem;line-height:1}.text-6xl{font-size:3.75rem;line-height:1}.text-7xl{font-size:4.5rem;line-height:1}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-black{font-weight:900}.font-bold{font-weight:700}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.tracking-tight{letter-spacing:-0.025em}.tracking-wider{letter-spacing:0.05em}.text-blue-100{--tw-text-opacity:1;color:rgb(219 234 254 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-emerald-600{--tw-text-opacity:1;color:rgb(5 150 105 / var(--tw-text-opacity, 1))}.text-orange-100{--tw-text-opacity:1;color:rgb(255 237 213 / var(--tw-text-opacity, 1))}.text-orange-600{--tw-text-opacity:1;color:rgb(234 88 12 / var(--tw-text-opacity, 1))}.text-pink-600{--tw-text-opacity:1;color:rgb(219 39 119 / var(--tw-text-opacity, 1))}.text-purple-600{--tw-text-opacity:1;color:rgb(147 51 234 / var(--tw-text-opacity, 1))}.text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184 / var(--tw-text-opacity, 1))}.text-slate-500{--tw-text-opacity:1;color:rgb(100 116 139 / var(--tw-text-opacity, 1))}.text-slate-600{--tw-text-opacity:1;color:rgb(71 85 105 / var(--tw-text-opacity, 1))}.text-slate-700{--tw-text-opacity:1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}.text-slate-800{--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}.text-transparent{color:transparent}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-white\/80{color:rgb(255 255 255 / 0.8)}.underline{-webkit-text-decoration-line:underline;text-decoration-line:underline}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-inner{--tw-shadow:inset 0 2px 4px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.backdrop-blur-sm{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-500{transition-duration:500ms}.ease-out{transition-timing-function:cubic-bezier(0, 0, 0.2, 1)}.hover\:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:bg-slate-700:hover{--tw-bg-opacity:1;background-color:rgb(51 65 85 / var(--tw-bg-opacity, 1))}.hover\:from-blue-500:hover{--tw-gradient-from:#3b82f6 var(--tw-gradient-from-position);--tw-gradient-to:rgb(59 130 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:from-blue-600:hover{--tw-gradient-from:#2563eb var(--tw-gradient-from-position);--tw-gradient-to:rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:from-emerald-500:hover{--tw-gradient-from:#10b981 var(--tw-gradient-from-position);--tw-gradient-to:rgb(16 185 129 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:from-orange-500:hover{--tw-gradient-from:#f97316 var(--tw-gradient-from-position);--tw-gradient-to:rgb(249 115 22 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:from-orange-600:hover{--tw-gradient-from:#ea580c var(--tw-gradient-from-position);--tw-gradient-to:rgb(234 88 12 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:from-purple-600:hover{--tw-gradient-from:#9333ea var(--tw-gradient-from-position);--tw-gradient-to:rgb(147 51 234 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:from-rose-500:hover{--tw-gradient-from:#f43f5e var(--tw-gradient-from-position);--tw-gradient-to:rgb(244 63 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:from-slate-600:hover{--tw-gradient-from:#475569 var(--tw-gradient-from-position);--tw-gradient-to:rgb(71 85 105 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:from-slate-700:hover{--tw-gradient-from:#334155 var(--tw-gradient-from-position);--tw-gradient-to:rgb(51 65 85 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:from-violet-500:hover{--tw-gradient-from:#8b5cf6 var(--tw-gradient-from-position);--tw-gradient-to:rgb(139 92 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:to-blue-600:hover{--tw-gradient-to:#2563eb var(--tw-gradient-to-position)}.hover\:to-emerald-600:hover{--tw-gradient-to:#059669 var(--tw-gradient-to-position)}.hover\:to-orange-600:hover{--tw-gradient-to:#ea580c var(--tw-gradient-to-position)}.hover\:to-pink-600:hover{--tw-gradient-to:#db2777 var(--tw-gradient-to-position)}.hover\:to-purple-600:hover{--tw-gradient-to:#9333ea var(--tw-gradient-to-position)}.hover\:to-red-600:hover{--tw-gradient-to:#dc2626 var(--tw-gradient-to-position)}.hover\:to-rose-600:hover{--tw-gradient-to:#e11d48 var(--tw-gradient-to-position)}.hover\:to-slate-700:hover{--tw-gradient-to:#334155 var(--tw-gradient-to-position)}.hover\:to-slate-800:hover{--tw-gradient-to:#1e293b var(--tw-gradient-to-position)}.hover\:to-violet-600:hover{--tw-gradient-to:#7c3aed var(--tw-gradient-to-position)}.hover\:text-slate-800:hover{--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}.focus\:border-orange-400:focus{--tw-border-opacity:1;border-color:rgb(251 146 60 / var(--tw-border-opacity, 1))}@media (min-width: 768px){.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.md\:p-6{padding:1.5rem}.md\:text-5xl{font-size:3rem;line-height:1}.md\:text-7xl{font-size:4.5rem;line-height:1}.md\:text-lg{font-size:1.125rem;line-height:1.75rem}}</style></head>
<body class="h-full bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50 overflow-auto">
<div id="app-container" class="w-full min-h-full p-4 md:p-6">
  <!-- Main Menu Screen -->
  <div id="main-menu" class="max-w-4xl mx-auto">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 id="main-title" class="text-3xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 mb-3">‚ö° Entrena les Grafies</h1>
      <p id="instruction-text" class="text-slate-700 text-base md:text-lg font-semibold">Completa cada paraula amb la grafia correcta: G, J, TG, TJ o TX</p>
    </div>
    <!-- Mode Selection -->
    <div class="grid md:grid-cols-2 gap-6 mb-8">
      <!-- Practice Mode -->
      <div class="mode-card bg-gradient-to-br from-blue-400 to-blue-500 rounded-3xl p-8 shadow-2xl border-4 border-blue-300 cursor-pointer" id="practice-mode-btn">
        <div class="text-center text-white">
          <div class="text-6xl mb-4">üìö</div>
          <h2 class="text-3xl font-black mb-3">Mode Pr√†ctica</h2>
          <p class="text-blue-100 font-semibold mb-4">S√®ries de 10 paraules</p>
          <ul class="text-left text-blue-100 text-sm space-y-2 mb-6">
            <li>‚úì Sense l√≠mit de temps</li>
            <li>‚úì Continua quan vulguis</li>
            <li>‚úì Perfecte per aprendre</li>
          </ul>
          <div class="bg-white text-blue-600 font-black py-3 px-6 rounded-full">Comen√ßar</div>
        </div>
      </div>
      <!-- Competition Mode -->
      <div class="mode-card bg-gradient-to-br from-orange-400 to-red-500 rounded-3xl p-8 shadow-2xl border-4 border-orange-300 cursor-pointer" id="competition-mode-btn">
        <div class="text-center text-white">
          <div class="text-6xl mb-4">‚è±Ô∏è</div>
          <h2 class="text-3xl font-black mb-3">Mode Competici√≥</h2>
          <p class="text-orange-100 font-semibold mb-4">2 minuts de repte</p>
          <ul class="text-left text-orange-100 text-sm space-y-2 mb-6">
            <li>‚úì Contra el cron√≤metre</li>
            <li>‚úì Guarda el teu r√®cord</li>
            <li>‚úì Puja al r√†nquing!</li>
          </ul>
          <div class="bg-white text-orange-600 font-black py-3 px-6 rounded-full">Competir</div>
        </div>
      </div>
    </div>
    <!-- Ranking Button -->
    <div class="text-center">
      <button id="ranking-btn" class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-black py-4 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all text-lg"> üèÜ Veure R√†nquing </button>
    </div>
  </div>

  <!-- Game Screen -->
  <div id="game-screen" class="hidden">
    <!-- Header with back button -->
    <div class="flex justify-between items-center mb-4">
      <button id="back-to-menu-btn" class="bg-slate-600 hover:bg-slate-700 text-white font-bold py-2 px-4 rounded-full shadow-lg"> ‚Üê Men√∫ </button>
      <div id="mode-indicator" class="text-lg font-black text-slate-700"></div>
      <div class="w-20"></div>
    </div>

    <!-- Timer (only for competition mode) -->
    <div id="timer-container" class="hidden text-center mb-4">
      <div class="bg-gradient-to-br from-red-500 to-orange-500 text-white rounded-2xl px-8 py-4 inline-block shadow-lg">
        <div class="text-sm font-bold uppercase tracking-wider">Temps Restant</div>
        <div class="text-4xl font-black"><span id="timer">2:00</span></div>
      </div>
    </div>

    <!-- Score Dashboard -->
    <div class="flex flex-wrap justify-center gap-3 mb-6 max-w-4xl mx-auto">
      <div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl px-6 py-3 shadow-lg">
        <div class="text-white/80 text-xs font-bold uppercase tracking-wider">Punts</div>
        <div class="text-white text-2xl font-black"><span id="points">0</span> pts</div>
      </div>
      <div class="bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl px-6 py-3 shadow-lg">
        <div class="text-white/80 text-xs font-bold uppercase tracking-wider">Encerts</div>
        <div class="text-white text-2xl font-black"><span id="correct-count">0</span></div>
      </div>
      <div class="bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl px-6 py-3 shadow-lg">
        <div class="text-white/80 text-xs font-bold uppercase tracking-wider">Ratxa</div>
        <div class="text-white text-2xl font-black">üî• <span id="streak">0</span></div>
      </div>
      <div id="round-display" class="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl px-6 py-3 shadow-lg">
        <div class="text-white/80 text-xs font-bold uppercase tracking-wider">Paraules</div>
        <div class="text-white text-2xl font-black"><span id="words-completed">0</span>/10</div>
      </div>
    </div>

    <!-- Progress Bar -->
    <div class="max-w-3xl mx-auto mb-6">
      <div class="bg-slate-200 rounded-full h-3 overflow-hidden shadow-inner">
        <div id="progress-bar" class="bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 h-full transition-all duration-500 ease-out" style="width: 0%"></div>
      </div>
    </div>

    <!-- Grafia Buttons -->
    <div class="flex flex-wrap justify-center gap-3 mb-6 max-w-3xl mx-auto">
      <button class="grafia-button bg-gradient-to-br from-rose-400 to-rose-500 hover:from-rose-500 hover:to-rose-600 text-white rounded-2xl px-8 py-4 shadow-lg border-4 border-rose-300" data-grafia="g"><span class="text-4xl font-black">G</span></button>
      <button class="grafia-button bg-gradient-to-br from-blue-400 to-blue-500 hover:from-blue-500 hover:to-blue-600 text-white rounded-2xl px-8 py-4 shadow-lg border-4 border-blue-300" data-grafia="j"><span class="text-4xl font-black">J</span></button>
      <button class="grafia-button bg-gradient-to-br from-emerald-400 to-emerald-500 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-2xl px-8 py-4 shadow-lg border-4 border-emerald-300" data-grafia="tg"><span class="text-4xl font-black">TG</span></button>
      <button class="grafia-button bg-gradient-to-br from-violet-400 to-violet-500 hover:from-violet-500 hover:to-violet-600 text-white rounded-2xl px-8 py-4 shadow-lg border-4 border-violet-300" data-grafia="tj"><span class="text-4xl font-black">TJ</span></button>
      <button class="grafia-button bg-gradient-to-br from-orange-400 to-orange-500 hover:from-orange-500 hover:to-orange-600 text-white rounded-2xl px-8 py-4 shadow-lg border-4 border-orange-300" data-grafia="tx"><span class="text-4xl font-black">TX</span></button>
    </div>

    <!-- Current Word Display -->
    <div class="max-w-2xl mx-auto mb-6">
      <div class="bg-gradient-to-br from-white to-slate-50 rounded-3xl p-8 shadow-2xl border-4 border-slate-200">
        <div class="text-center">
          <div class="text-slate-500 text-sm font-bold uppercase tracking-wider mb-3">Quina √©s la grafia correcta?</div>
          <div id="current-word" class="text-5xl md:text-7xl font-black text-slate-800 mb-4 tracking-tight"><!-- Word here --></div>
          <div id="word-hint" class="text-slate-400 text-sm font-semibold italic hidden mt-2"><!-- Hint --></div>
          <div class="flex justify-center gap-2 mt-4">
            <div class="h-2 w-2 bg-purple-400 rounded-full animate-pulse"></div>
            <div class="h-2 w-2 bg-pink-400 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
            <div class="h-2 w-2 bg-orange-400 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Feedback Message -->
    <div id="feedback-message" class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 hidden">
      <div id="feedback-content" class="bg-white rounded-3xl px-8 py-6 shadow-2xl border-4 text-center">
        <div id="feedback-icon" class="text-6xl mb-2"></div>
        <div id="feedback-text" class="text-2xl font-black"></div>
        <div id="feedback-points" class="text-lg font-bold mt-1"></div>
      </div>
    </div>
  </div>

  <!-- Series Completion Modal (Practice Mode) -->
  <div id="series-completion" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50">
    <div class="bg-gradient-to-br from-blue-50 to-purple-50 rounded-3xl p-10 text-center shadow-2xl max-w-lg mx-4 border-4 border-blue-200">
      <div class="text-7xl mb-4">üéâ</div>
      <h2 class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-3">S√®rie Completada!</h2>
      <div class="bg-white rounded-2xl p-6 mb-6 shadow-lg">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <div class="text-3xl font-black text-purple-600"><span id="series-points">0</span></div>
            <div class="text-xs text-slate-600 font-bold uppercase">Punts</div>
          </div>
          <div>
            <div class="text-3xl font-black text-emerald-600"><span id="series-correct">0</span>/10</div>
            <div class="text-xs text-slate-600 font-bold uppercase">Encerts</div>
          </div>
        </div>
      </div>
      <div class="flex gap-3 justify-center">
        <button id="continue-btn" class="bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all"> ‚ûú Continuar (10 m√©s) </button>
        <button id="finish-practice-btn" class="bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all"> ‚úì Acabar </button>
      </div>
    </div>
  </div>

  <!-- Competition End Modal -->
  <div id="competition-end" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50">
    <div class="bg-gradient-to-br from-orange-50 to-red-50 rounded-3xl p-10 text-center shadow-2xl max-w-lg mx-4 border-4 border-orange-200">
      <div class="text-7xl mb-4">üèÜ</div>
      <h2 class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-orange-600 to-red-600 mb-3">Temps Acabat!</h2>
      <div class="bg-white rounded-2xl p-6 mb-6 shadow-lg">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <div class="text-3xl font-black text-purple-600"><span id="comp-points">0</span></div>
            <div class="text-xs text-slate-600 font-bold uppercase">Punts Totals</div>
          </div>
          <div>
            <div class="text-3xl font-black text-emerald-600"><span id="comp-correct">0</span></div>
            <div class="text-xs text-slate-600 font-bold uppercase">Encerts</div>
          </div>
          <div>
            <div class="text-3xl font-black text-pink-600"><span id="comp-streak">0</span></div>
            <div class="text-xs text-slate-600 font-bold uppercase">Millor Ratxa</div>
          </div>
          <div>
            <div class="text-3xl font-black text-orange-600"><span id="comp-accuracy">0</span>%</div>
            <div class="text-xs text-slate-600 font-bold uppercase">Precisi√≥</div>
          </div>
        </div>
      </div>
      <!-- Name Input for Ranking -->
      <div class="mb-6">
        <label for="player-name-input" class="block text-slate-700 font-bold mb-2">Guarda el teu r√®cord:</label>
        <input type="text" id="player-name-input" placeholder="Escriu el teu nom" maxlength="20" class="w-full px-4 py-3 rounded-full border-4 border-orange-200 focus:border-orange-400 outline-none text-center font-bold text-lg">
      </div>
      <div class="flex gap-3 justify-center">
        <button id="save-score-btn" class="bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all"> üíæ Guardar i Veure R√†nquing </button>
      </div>
      <button id="back-from-comp-btn" class="mt-4 text-slate-600 hover:text-slate-800 font-bold underline"> Tornar al men√∫ </button>
    </div>
  </div>

  <!-- Ranking Screen -->
  <div id="ranking-screen" class="hidden max-w-4xl mx-auto">
    <div class="text-center mb-8">
      <h1 class="text-3xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-600 via-orange-600 to-red-600 mb-3">üèÜ R√†nquing</h1>
      <p class="text-slate-700 text-base font-semibold">Els millors jugadors del Mode Competici√≥</p>
    </div>
    <div class="bg-white rounded-3xl p-8 shadow-2xl border-4 border-yellow-200 mb-6">
      <div id="ranking-list" class="space-y-3"><!-- Rankings --></div>
      <div id="empty-ranking" class="text-center py-12 text-slate-400">
        <div class="text-6xl mb-4">üéØ</div>
        <p class="text-lg font-semibold">Encara no hi ha cap r√®cord!</p>
        <p class="text-sm">Sigues el primer en completar el mode competici√≥</p>
      </div>
    </div>
    <div class="text-center">
      <button id="back-from-ranking-btn" class="bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all"> ‚Üê Tornar al Men√∫ </button>
    </div>
  </div>
</div>

<script>
// Word database ‚Äì 84 paraules (G=20, J=14, TG=18, TJ=12, TX=20)
const wordsData = [ // G (20) 
 { word: "gel", grafia: "g" }, 
 { word: "genoll", grafia: "g" }, 
 { word: "gener", grafia: "g" }, 
 { word: "general", grafia: "g" }, 
 { word: "geni", grafia: "g" }, 
 { word: "gent", grafia: "g" }, 
 { word: "gimn√†s", grafia: "g" }, 
 { word: "girafa", grafia: "g" }, 
 { word: "girar", grafia: "g" }, 
 { word: "ginesta", grafia: "g" }, 
 { word: "origen", grafia: "g" }, 
 { word: "religi√≥", grafia: "g" }, 
 { word: "regi√≥", grafia: "g" }, 
 { word: "energia", grafia: "g" }, 
 { word: "gelosia", grafia: "g" }, 
 { word: "argent", grafia: "g" }, 
 { word: "pag√®s", grafia: "g" }, 
 { word: "llegir", grafia: "g" }, 
 { word: "suggerir", grafia: "g" }, 
 { word: "magenta", grafia: "g" }, 
 // J (14) 
 { word: "jard√≠", grafia: "j" }, 
 { word: "jaqueta", grafia: "j" }, 
 { word: "jove", grafia: "j" }, 
 { word: "joguina", grafia: "j" }, 
 { word: "joc", grafia: "j" }, 
 { word: "juliol", grafia: "j" }, 
 { word: "joia", grafia: "j" }, 
 { word: "jeure", grafia: "j" }, 
 { word: "jornada", grafia: "j" }, 
 { word: "jersei", grafia: "j" }, 
 { word: "jerarquia", grafia: "j" }, 
 { word: "juny", grafia: "j" }, 
 { word: "juvenil", grafia: "j" }, 
 { word: "majoria", grafia: "j" }, 
 // TG (18) 
 { word: "metge", grafia: "tg" }, 
 { word: "metgessa", grafia: "tg" }, 
 { word: "muntatge", grafia: "tg" }, 
 { word: "rodatge", grafia: "tg" }, 
 { word: "metratge", grafia: "tg" }, 
 { word: "blindatge", grafia: "tg" }, 
 { word: "viatge", grafia: "tg" }, 
 { word: "viatger", grafia: "tg" }, 
 { word: "passatge", grafia: "tg" }, 
 { word: "missatge", grafia: "tg" }, 
 { word: "avantatge", grafia: "tg" }, 
 { word: "desavantatge", grafia: "tg" }, 
 { word: "reportatge", grafia: "tg" }, 
 { word: "garatge", grafia: "tg" }, 
 { word: "sabotatge", grafia: "tg" }, 
 { word: "arbitratge", grafia: "tg" }, 
 { word: "embalatge", grafia: "tg" }, 
 { word: "equipatge", grafia: "tg" }, 
 // TJ (12) 
 { word: "platja", grafia: "tj" }, 
 { word: "pitjor", grafia: "tj" }, 
 { word: "desitjar", grafia: "tj" }, 
 { word: "rebutjar", grafia: "tj" }, 
 { word: "mitj√≥", grafia: "tj" }, 
 { word: "assetjar", grafia: "tj" }, 
 { word: "assetjament", grafia: "tj" }, 
 { word: "sotjar", grafia: "tj" }, 
 { word: "estotjar", grafia: "tj" }, 
 { word: "llotja", grafia: "tj" }, 
 { word: "lletja", grafia: "tj" }, 
 { word: "jutjar", grafia: "tj" }, 
 // TX (19) 
 { word: "cotxe", grafia: "tx" }, 
 { word: "caputxa", grafia: "tx" }, 
 { word: "pitxer", grafia: "tx" }, 
 { word: "fitxa", grafia: "tx" }, 
 { word: "fitxar", grafia: "tx" }, 
 { word: "fitxer", grafia: "tx" }, 
 { word: "despatx", grafia: "tx" }, 
 { word: "despatxar", grafia: "tx" }, 
 { word: "metxa", grafia: "tx" }, 
 { word: "bretxa", grafia: "tx" }, 
 { word: "motxilla", grafia: "tx" }, 
 { word: "ratxa", grafia: "tx" }, 
 { word: "esquitx", grafia: "tx" }, 
 { word: "esquitxar", grafia: "tx" }, 
 { word: "esquitxos", grafia: "tx" }, 
 { word: "botx√≠", grafia: "tx" }, 
 { word: "cotxet", grafia: "tx" }, 
 { word: "caputxeta", grafia: "tx" }, 
 { word: "atxa", grafia: "tx" }, ];

// Game state
let currentMode = null; // 'practice' or 'competition'
let points = 0;
let correctCount = 0;
let errorCount = 0;
let streak = 0;
let bestStreak = 0;
let currentWordIndex = 0;
let shuffledWords = [];
let currentWord = null;
let wordsPerSeries = 10;
let currentSeriesWords = 0;

// Competition mode
let timerInterval = null;
let timeRemaining = 120; // 2 minutes in seconds
let isGameActive = false;

// Rankings data
let rankingsData = [];

// Default config
const defaultConfig = {
  activity_title: "‚ö° Entrena les Grafies",
  instruction_text: "Completa cada paraula amb la grafia correcta: G, J, TG, TJ o TX"
};

// Data SDK handler
const dataHandler = {
  onDataChanged(data) {
    rankingsData = data.sort((a, b) => b.score - a.score).slice(0, 10);
    updateRankingDisplay();
  }
};

function shuffleArray(array) {
  const shuffled = [...array];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  return shuffled;
}

// Show/Hide screens
function showScreen(screenId) {
  document.getElementById('main-menu').classList.add('hidden');
  document.getElementById('game-screen').classList.add('hidden');
  document.getElementById('ranking-screen').classList.add('hidden');
  document.getElementById(screenId).classList.remove('hidden');
}

// Start practice mode
function startPracticeMode() {
  currentMode = 'practice';
  resetGameState();
  shuffledWords = shuffleArray([...wordsData]);
  document.getElementById('mode-indicator').textContent = 'üìö Mode Pr√†ctica';
  document.getElementById('timer-container').classList.add('hidden');
  document.getElementById('round-display').classList.remove('hidden');
  showScreen('game-screen');
  showNextWord();
}

// Start competition mode
function startCompetitionMode() {
  currentMode = 'competition';
  resetGameState();
  shuffledWords = shuffleArray([...wordsData]);
  timeRemaining = 120;
  isGameActive = true;
  document.getElementById('mode-indicator').textContent = '‚è±Ô∏è Mode Competici√≥';
  document.getElementById('timer-container').classList.remove('hidden');
  document.getElementById('round-display').classList.remove('hidden');
  showScreen('game-screen');
  startTimer();
  showNextWord();
}

// Timer for competition mode
function startTimer() {
  updateTimerDisplay();
  timerInterval = setInterval(() => {
    if (!isGameActive) { clearInterval(timerInterval); return; }
    timeRemaining--;
    updateTimerDisplay();
    if (timeRemaining <= 0) { endCompetition(); }
  }, 1000);
}

function updateTimerDisplay() {
  const minutes = Math.floor(timeRemaining / 60);
  const seconds = timeRemaining % 60;
  document.getElementById('timer').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
}

function endCompetition() {
  isGameActive = false;
  clearInterval(timerInterval);
  const totalAttempts = correctCount + errorCount;
  const accuracy = totalAttempts > 0 ? Math.round((correctCount / totalAttempts) * 100) : 0;
  document.getElementById('comp-points').textContent = points;
  document.getElementById('comp-correct').textContent = correctCount;
  document.getElementById('comp-streak').textContent = bestStreak;
  document.getElementById('comp-accuracy').textContent = accuracy;
  document.getElementById('competition-end').classList.remove('hidden');
  playCompletionSound();
  createConfetti();
}

// Reset game state
function resetGameState() {
  points = 0;
  correctCount = 0;
  errorCount = 0;
  streak = 0;
  bestStreak = 0;
  currentWordIndex = 0;
  currentSeriesWords = 0;
  document.getElementById('points').textContent = '0';
  document.getElementById('correct-count').textContent = '0';
  document.getElementById('streak').textContent = '0';
  document.getElementById('words-completed').textContent = '0';
  document.getElementById('progress-bar').style.width = '0%';
}

// Show next word
function showNextWord() {
  if (currentMode === 'practice' && currentSeriesWords >= wordsPerSeries) { showSeriesCompletion(); return; }
  if (currentWordIndex >= shuffledWords.length) { shuffledWords = shuffleArray([...wordsData]); currentWordIndex = 0; }
  currentWord = shuffledWords[currentWordIndex];
  const wordDisplay = document.getElementById('current-word');

  // Replace the target grafia with underscore
  let displayWord = currentWord.word;
  const grafiaToFind = currentWord.grafia.toLowerCase();
  let regex;
  if (grafiaToFind === 'tg') { regex = /tg/gi; }
  else if (grafiaToFind === 'tj') { regex = /tj/gi; }
  else if (grafiaToFind === 'tx') { regex = /tx/gi; }
  else if (grafiaToFind === 'j') { regex = /j/gi; }
  else if (grafiaToFind === 'g') { regex = /g(?=[e√©i√Ø√®E√â√àI√ç√è])/giu; } // nom√©s g davant de e/i

  if (regex) { displayWord = displayWord.replace(regex, '_'); }
  wordDisplay.textContent = displayWord;
  wordDisplay.style.animation = 'none';
  setTimeout(() => { wordDisplay.style.animation = 'fadeIn 0.5s ease'; }, 10);
  document.getElementById('word-hint').classList.add('hidden');

  if (currentMode === 'practice') {
    document.getElementById('words-completed').textContent = currentSeriesWords;
    const progress = (currentSeriesWords / wordsPerSeries) * 100;
    document.getElementById('progress-bar').style.width = progress + '%';
  } else {
    document.getElementById('words-completed').textContent = correctCount;
    document.getElementById('progress-bar').style.width = '100%';
  }
}

// Setup grafia buttons
function setupGrafiaButtons() {
  const buttons = document.querySelectorAll('.grafia-button');
  buttons.forEach(button => {
    button.addEventListener('click', () => {
      if (!currentWord || !isGameActive) return;
      handleAnswer(button.dataset.grafia);
    });
  });
}

// Handle answer
function handleAnswer(selectedGrafia) {
  if (!currentWord) return;
  const isCorrect = selectedGrafia === currentWord.grafia;
  if (isCorrect) {
    streak++;
    if (streak > bestStreak) bestStreak = streak;
    let pointsEarned = 10;
    if (streak >= 5) pointsEarned = 20;
    if (streak >= 10) pointsEarned = 30;
    points += pointsEarned;
    correctCount++;
    document.getElementById('points').textContent = points;
    document.getElementById('correct-count').textContent = correctCount;
    document.getElementById('streak').textContent = streak;
    showFeedback(true, pointsEarned);
  } else {
    errorCount++;
    streak = 0;
    document.getElementById('streak').textContent = streak;
    showFeedback(false, 0);
  }
  currentWordIndex++;
  currentSeriesWords++;
  setTimeout(() => { showNextWord(); }, 1500);
}

// Show series completion (practice mode)
function showSeriesCompletion() {
  isGameActive = false;
  document.getElementById('series-points').textContent = points;
  document.getElementById('series-correct').textContent = correctCount;
  document.getElementById('series-completion').classList.remove('hidden');
  playCompletionSound();
}

// Continue to next series
function continueNextSeries() {
  currentSeriesWords = 0;
  isGameActive = true;
  document.getElementById('series-completion').classList.add('hidden');
  document.getElementById('words-completed').textContent = '0';
  document.getElementById('progress-bar').style.width = '0%';
  showNextWord();
}

// Sound effects
const audioContext = new (window.AudioContext || window.webkitAudioContext)();
function playCorrectSound() {
  const oscillator = audioContext.createOscillator();
  const gainNode = audioContext.createGain();
  oscillator.connect(gainNode); gainNode.connect(audioContext.destination);
  oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
  oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
  oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);
  gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
  gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
  oscillator.start(audioContext.currentTime);
  oscillator.stop(audioContext.currentTime + 0.4);
}
function playStreakSound() {
  const oscillator = audioContext.createOscillator();
  const gainNode = audioContext.createGain();
  oscillator.connect(gainNode); gainNode.connect(audioContext.destination);
  oscillator.type = 'triangle';
  oscillator.frequency.setValueAtTime(880, audioContext.currentTime);
  oscillator.frequency.exponentialRampToValueAtTime(1760, audioContext.currentTime + 0.2);
  gainNode.gain.setValueAtTime(0.4, audioContext.currentTime);
  gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
  oscillator.start(audioContext.currentTime);
  oscillator.stop(audioContext.currentTime + 0.3);
}
function playIncorrectSound() {
  const oscillator = audioContext.createOscillator();
  const gainNode = audioContext.createGain();
  oscillator.connect(gainNode); gainNode.connect(audioContext.destination);
  oscillator.type = 'sawtooth';
  oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
  oscillator.frequency.exponentialRampToValueAtTime(100, audioContext.currentTime + 0.3);
  gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
  gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
  oscillator.start(audioContext.currentTime);
  oscillator.stop(audioContext.currentTime + 0.3);
}
function playCompletionSound() {
  const notes = [523.25, 659.25, 783.99, 1046.50];
  notes.forEach((freq, index) => {
    setTimeout(() => {
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      oscillator.connect(gainNode); gainNode.connect(audioContext.destination);
      oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.5);
    }, index * 100);
  });
}

// Show feedback
function showFeedback(isCorrect, pointsEarned) {
  const feedback = document.getElementById('feedback-message');
  const icon = document.getElementById('feedback-icon');
  const text = document.getElementById('feedback-text');
  const pointsText = document.getElementById('feedback-points');
  const content = document.getElementById('feedback-content');
  const hint = document.getElementById('word-hint');
  hint.textContent = 'Paraula completa: ' + currentWord.word;
  hint.classList.remove('hidden');
  if (isCorrect) {
    if (streak >= 5) { playStreakSound(); } else { playCorrectSound(); }
    icon.textContent = '‚úì';
    text.textContent = 'Correcte!';
    text.style.color = '#10b981';
    content.style.borderColor = '#10b981';
    pointsText.textContent = '+' + pointsEarned + ' punts';
    pointsText.style.color = '#8b5cf6';
    if (streak >= 5) { text.textContent = 'üî• Incre√Øble!'; }
    if (streak >= 10) { text.textContent = '‚ö° Imparable!'; }
  } else {
    playIncorrectSound();
    icon.textContent = '‚úó';
    text.textContent = 'Incorrecte';
    text.style.color = '#ef4444';
    content.style.borderColor = '#ef4444';
    pointsText.textContent = 'Correcte: ' + currentWord.grafia.toUpperCase();
    pointsText.style.color = '#64748b';
  }
  feedback.classList.remove('hidden');
  feedback.style.animation = 'fadeIn 0.3s ease';
  setTimeout(() => { feedback.classList.add('hidden'); }, 1200);
}

// Confetti effect
function createConfetti() {
  const colors = ['#f59e0b', '#10b981', '#3b82f6', '#8b5cf6', '#ef4444'];
  for (let i = 0; i < 50; i++) {
    setTimeout(() => {
      const confetti = document.createElement('div');
      confetti.className = 'confetti';
      confetti.style.left = Math.random() * 100 + 'vw';
      confetti.style.top = '-10px';
      confetti.style.width = '10px';
      confetti.style.height = '10px';
      confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
      confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
      confetti.style.transform = 'rotate(' + (Math.random() * 360) + 'deg)';
      document.body.appendChild(confetti);
      let posY = -10; let posX = parseFloat(confetti.style.left); let rotation = 0;
      const speed = 2 + Math.random() * 3; const drift = (Math.random() - 0.5) * 2;
      const fall = setInterval(() => {
        posY += speed; posX += drift; rotation += 5;
        confetti.style.top = posY + 'px'; confetti.style.left = posX + 'vw'; confetti.style.transform = 'rotate(' + rotation + 'deg)';
        if (posY > window.innerHeight) { clearInterval(fall); confetti.remove(); }
      }, 20);
    }, i * 30);
  }
}

// Save score to ranking
async function saveScore() {
  const playerName = document.getElementById('player-name-input').value.trim();
  if (!playerName) {
    const messageDiv = document.createElement('div');
    messageDiv.textContent = 'Si us plau, escriu el teu nom!';
    messageDiv.className = 'text-red-600 font-bold mt-2';
    messageDiv.id = 'name-error';
    const existingError = document.getElementById('name-error');
    if (existingError) existingError.remove();
    document.getElementById('player-name-input').parentNode.appendChild(messageDiv);
    return;
  }
  const scoreData = { player_name: playerName, score: points, correct_answers: correctCount, time_completed: new Date().toISOString() };
  const saveBtn = document.getElementById('save-score-btn');
  saveBtn.disabled = true; saveBtn.textContent = 'Guardant...';
  if (window.dataSdk) {
    const result = await window.dataSdk.create(scoreData);
    if (result.isOk) { document.getElementById('competition-end').classList.add('hidden'); showScreen('ranking-screen'); }
    else {
      const messageDiv = document.createElement('div');
      messageDiv.textContent = 'Error al guardar. Torna-ho a intentar.';
      messageDiv.className = 'text-red-600 font-bold mt-2';
      messageDiv.id = 'save-error';
      const existingError = document.getElementById('save-error');
      if (existingError) existingError.remove();
      saveBtn.parentNode.appendChild(messageDiv);
    }
  }
  saveBtn.disabled = false; saveBtn.textContent = 'üíæ Guardar i Veure R√†nquing';
}

// Update ranking display
function updateRankingDisplay() {
  const rankingList = document.getElementById('ranking-list');
  const emptyRanking = document.getElementById('empty-ranking');
  if (rankingsData.length === 0) { rankingList.innerHTML = ''; emptyRanking.classList.remove('hidden'); return; }
  emptyRanking.classList.add('hidden');
  const medals = ['ü•á', 'ü•à', 'ü•â'];
  rankingList.innerHTML = rankingsData.map((record, index) => {
    const medal = medals[index] || `${index + 1}.`;
    const date = new Date(record.time_completed);
    const dateStr = date.toLocaleDateString('ca-ES', { day: 'numeric', month: 'short' });
    return `
      <div class="flex items-center justify-between bg-gradient-to-r ${index === 0 ? 'from-yellow-100 to-orange-100 border-yellow-400' : index === 1 ? 'from-gray-100 to-gray-200 border-gray-400' : index === 2 ? 'from-orange-100 to-orange-200 border-orange-400' : 'from-slate-50 to-slate-100 border-slate-300'} border-4 rounded-2xl p-4 shadow-lg">
        <div class="flex items-center gap-4 flex-1">
          <div class="text-3xl font-black w-12 text-center">${medal}</div>
          <div class="flex-1">
            <div class="text-xl font-black text-slate-800">${record.player_name}</div>
            <div class="text-sm text-slate-600 font-semibold">${record.correct_answers} encerts ¬∑ ${dateStr}</div>
          </div>
        </div>
        <div class="text-right">
          <div class="text-2xl font-black text-purple-600">${record.score}</div>
          <div class="text-xs text-slate-600 font-bold">PUNTS</div>
        </div>
      </div>
    `;
  }).join('');
}

// Event Listeners

document.getElementById('practice-mode-btn').addEventListener('click', () => { isGameActive = true; startPracticeMode(); });

document.getElementById('competition-mode-btn').addEventListener('click', () => { isGameActive = true; startCompetitionMode(); });

document.getElementById('ranking-btn').addEventListener('click', () => { showScreen('ranking-screen'); });

document.getElementById('back-to-menu-btn').addEventListener('click', () => { isGameActive = false; clearInterval(timerInterval); showScreen('main-menu'); });

document.getElementById('continue-btn').addEventListener('click', () => { continueNextSeries(); });

document.getElementById('finish-practice-btn').addEventListener('click', () => { document.getElementById('series-completion').classList.add('hidden'); showScreen('main-menu'); });

document.getElementById('save-score-btn').addEventListener('click', saveScore);

document.getElementById('back-from-comp-btn').addEventListener('click', () => { document.getElementById('competition-end').classList.add('hidden'); showScreen('main-menu'); });

document.getElementById('back-from-ranking-btn').addEventListener('click', () => { showScreen('main-menu'); });

// Config change handler
async function onConfigChange(config) {
  const title = config.activity_title || defaultConfig.activity_title;
  const instruction = config.instruction_text || defaultConfig.instruction_text;
  document.getElementById('main-title').innerHTML = title;
  document.getElementById('instruction-text').textContent = instruction;
}

// Map to capabilities
function mapToCapabilities(config) { return { recolorables: [], borderables: [], fontEditable: undefined, fontSizeable: undefined }; }

// Map to edit panel values
function mapToEditPanelValues(config) { return new Map([
  ["activity_title", config.activity_title || defaultConfig.activity_title],
  ["instruction_text", config.instruction_text || defaultConfig.instruction_text]
]); }

// Initialize
async function init() {
  setupGrafiaButtons();
  if (window.dataSdk) { await window.dataSdk.init(dataHandler); }
  if (window.elementSdk) {
    window.elementSdk.init({ defaultConfig, onConfigChange, mapToCapabilities, mapToEditPanelValues });
  }
}
init();
</script>

</body></html>